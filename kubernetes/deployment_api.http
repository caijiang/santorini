### token 问题应该查看 kube-apiserver@kube-system 的日志
### 查看
GET {{url}}/apis/apps/v1/namespaces/{{namespace}}/deployments?
    labelSelector=app.kubernetes.io/name=release-name-common-required-santorini-console-backend1
Authorization: Bearer {{JWT}}

### a
GET {{url}}/api/v1/namespaces/{{namespace}}/pods
Authorization: Bearer {{JWT}}

### a
GET {{url}}/api/v1
Authorization: Bearer {{JWT}}

### kubectl auth can-i get pods --token="eyJhbGciOiJSUzI1NiIsImtpZCI6IlFMQXFLQ1prQ2s3R3JyM3dCTmJlYkZmbzd2eS1qeUlZWGliWGNwV3U3X2cifQ.eyJhdWQiOlsiYXBpIiwia3ViZXJuZXRlcyJdLCJleHAiOjE3NjM0NzA2NjcsImlhdCI6MTc2MzM4NDI2NywiaXNzIjoiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiLCJqdGkiOiJmMDJmZTY0MS03OGNhLTQ1ODUtOTkwMi03OWMzNjZjYmJkYzIiLCJrdWJlcm5ldGVzLmlvIjp7Im5hbWVzcGFjZSI6ImRlZmF1bHQiLCJzZXJ2aWNlYWNjb3VudCI6eyJuYW1lIjoidXNlci1hY2NvdW50NzlyeDYiLCJ1aWQiOiJkNDNiOGI3NC05NTQ4LTQxZGEtYjRiNS1hNTM1NzA3OThmYmMifX0sIm5iZiI6MTc2MzM4NDI2Nywic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50OmRlZmF1bHQ6dXNlci1hY2NvdW50NzlyeDYifQ.r0F6OOwCy1aNUzVvDzOi764qkiP0f2lQn4GXAyOnCQzb_zhClaU5ekvsUr-lCNedLuHd-9XgMgHyxa9yR3xKAUPENQ3FdgxAQxBSa9y0ngZBNg7oo-PIV64qKfk_-KY7VJ2kZ5vJyQWiMVIGymzfNdQhKkGBCUOt0WtLc8TN-RVPfSqNDBop9JPcp1QfoVhbR-Vri6I4i2O7bbCo9ckIEvrdvOuGsnX01K13RnEPUzE2b31Di8Ix6dQLBqKClCzCrw-PuA7cnl7yU_b1sF2YNcYgXVQ7rq8ZpfxMNtHj20IXKexj35Kc60ULF3YR080VawxRGR-ditvFOliN1AjFkg" --server="https://<ip>:443" -n default
## kubectl auth whoami --token "eyJhbGciOiJSUzI1NiIsImtpZCI6IlFMQXFLQ1prQ2s3R3JyM3dCTmJlYkZmbzd2eS1qeUlZWGliWGNwV3U3X2cifQ.eyJhdWQiOlsiYXBpIiwia3ViZXJuZXRlcyJdLCJleHAiOjE3NjM0NzA2NjcsImlhdCI6MTc2MzM4NDI2NywiaXNzIjoiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiLCJqdGkiOiJmMDJmZTY0MS03OGNhLTQ1ODUtOTkwMi03OWMzNjZjYmJkYzIiLCJrdWJlcm5ldGVzLmlvIjp7Im5hbWVzcGFjZSI6ImRlZmF1bHQiLCJzZXJ2aWNlYWNjb3VudCI6eyJuYW1lIjoidXNlci1hY2NvdW50NzlyeDYiLCJ1aWQiOiJkNDNiOGI3NC05NTQ4LTQxZGEtYjRiNS1hNTM1NzA3OThmYmMifX0sIm5iZiI6MTc2MzM4NDI2Nywic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50OmRlZmF1bHQ6dXNlci1hY2NvdW50NzlyeDYifQ.r0F6OOwCy1aNUzVvDzOi764qkiP0f2lQn4GXAyOnCQzb_zhClaU5ekvsUr-lCNedLuHd-9XgMgHyxa9yR3xKAUPENQ3FdgxAQxBSa9y0ngZBNg7oo-PIV64qKfk_-KY7VJ2kZ5vJyQWiMVIGymzfNdQhKkGBCUOt0WtLc8TN-RVPfSqNDBop9JPcp1QfoVhbR-Vri6I4i2O7bbCo9ckIEvrdvOuGsnX01K13RnEPUzE2b31Di8Ix6dQLBqKClCzCrw-PuA7cnl7yU_b1sF2YNcYgXVQ7rq8ZpfxMNtHj20IXKexj35Kc60ULF3YR080VawxRGR-ditvFOliN1AjFkg" --kubeconfig=/root/.kube/config_without_token
### whoami; 带 Bearer 401
POST {{url}}/apis/authentication.k8s.io/v1/selfsubjectreviews
Content-Type: application/json
Authorization: Bearer {{JWT}}

{
  "apiVersion": "authentication.k8s.io/v1",
  "kind": "SelfSubjectReview"
}

### 本地访问 Token
## curl -vk -H "Authorization: Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IlFMQXFLQ1prQ2s3R3JyM3dCTmJlYkZmbzd2eS1qeUlZWGliWGNwV3U3X2cifQ.eyJhdWQiOlsiYXBpIiwia3ViZXJuZXRlcyJdLCJleHAiOjE3NjM0NzA2NjcsImlhdCI6MTc2MzM4NDI2NywiaXNzIjoiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiLCJqdGkiOiJmMDJmZTY0MS03OGNhLTQ1ODUtOTkwMi03OWMzNjZjYmJkYzIiLCJrdWJlcm5ldGVzLmlvIjp7Im5hbWVzcGFjZSI6ImRlZmF1bHQiLCJzZXJ2aWNlYWNjb3VudCI6eyJuYW1lIjoidXNlci1hY2NvdW50NzlyeDYiLCJ1aWQiOiJkNDNiOGI3NC05NTQ4LTQxZGEtYjRiNS1hNTM1NzA3OThmYmMifX0sIm5iZiI6MTc2MzM4NDI2Nywic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50OmRlZmF1bHQ6dXNlci1hY2NvdW50NzlyeDYifQ.r0F6OOwCy1aNUzVvDzOi764qkiP0f2lQn4GXAyOnCQzb_zhClaU5ekvsUr-lCNedLuHd-9XgMgHyxa9yR3xKAUPENQ3FdgxAQxBSa9y0ngZBNg7oo-PIV64qKfk_-KY7VJ2kZ5vJyQWiMVIGymzfNdQhKkGBCUOt0WtLc8TN-RVPfSqNDBop9JPcp1QfoVhbR-Vri6I4i2O7bbCo9ckIEvrdvOuGsnX01K13RnEPUzE2b31Di8Ix6dQLBqKClCzCrw-PuA7cnl7yU_b1sF2YNcYgXVQ7rq8ZpfxMNtHj20IXKexj35Kc60ULF3YR080VawxRGR-ditvFOliN1AjFkg" https://172.16.208.142:6443/api